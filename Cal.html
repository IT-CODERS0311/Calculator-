<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Love Vibes Calculator üíñ</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1: #ffd6f0;
    --bg2: #ffeef8;
    --accent: #ff6fb5;
    --accent-dark: #c44a86;
    --card: rgba(255,255,255,0.8);
    --glass: rgba(255,255,255,0.35);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    font-family:'Poppins',system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;
    background: linear-gradient(135deg, var(--bg1) 0%, #ffdff5 35%, #fff5fb 100%);
    overflow:hidden;
  }

  /* floating hearts background */
  .bg-heart{
    position:fixed;
    inset:0;
    pointer-events:none;
  }
  .bg-heart i{
    position:absolute;
    font-size:20px;
    opacity:0.08;
    transform:translateY(0);
    animation: floatUp linear infinite;
  }
  @keyframes floatUp{
    from { transform: translateY(60vh) scale(1); opacity:0.05; }
    to   { transform: translateY(-10vh) scale(1.2); opacity:0.18; }
  }

  .card{
    width:360px;
    max-width:92vw;
    padding:20px;
    border-radius:18px;
    background: linear-gradient(180deg, var(--card), rgba(255,255,255,0.65));
    box-shadow: 0 10px 30px rgba(197,80,150,0.12), 0 2px 6px rgba(0,0,0,0.05);
    backdrop-filter: blur(6px);
    border: 1px solid rgba(255,255,255,0.6);
  }

  .title{
    display:flex;
    align-items:center;
    gap:12px;
    margin-bottom:12px;
  }
  .logo{
    width:52px;
    height:52px;
    border-radius:12px;
    background: linear-gradient(135deg,var(--accent), var(--accent-dark));
    display:flex;
    align-items:center;
    justify-content:center;
    color:white;
    font-size:24px;
    box-shadow: 0 6px 18px rgba(197,80,150,0.25);
  }
  h1{margin:0;font-size:18px;color:var(--accent-dark);font-weight:700}
  p.sub{margin:0;margin-left:64px;margin-top:4px;color:#7a4a6b;font-size:12px}

  /* display */
  .display{
    margin-top:14px;
    background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.85));
    border-radius:12px;
    padding:18px;
    box-shadow: inset 0 -2px 8px rgba(0,0,0,0.02);
    display:flex;
    flex-direction:column;
    gap:6px;
    min-height:86px;
  }
  .expr{
    color:#8a476f;
    font-size:14px;
    opacity:0.9;
    text-align:right;
    word-break:break-all;
  }
  .result{
    color:var(--accent-dark);
    font-size:28px;
    text-align:right;
    font-weight:700;
    letter-spacing:0.5px;
  }

  /* keypad */
  .keys{
    margin-top:12px;
    display:grid;
    grid-template-columns: repeat(4,1fr);
    gap:12px;
  }
  button.key{
    border:0;
    padding:14px;
    font-size:18px;
    border-radius:12px;
    cursor:pointer;
    transition: transform 0.08s ease, box-shadow 0.12s ease;
    box-shadow: 0 6px 12px rgba(203,100,160,0.08);
    background: linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.65));
    color:#7b3a63;
    font-weight:600;
  }
  button.key:active{ transform: translateY(3px) scale(0.995); box-shadow:none; }

  /* special keys style */
  .key.op{
    background: linear-gradient(180deg, var(--accent), var(--accent-dark));
    color:white;
    box-shadow: 0 10px 18px rgba(197,80,150,0.18);
  }
  .key.clear{
    background: linear-gradient(180deg, #fff0f6, #fff5fb);
    color: #c84a8d;
    box-shadow: 0 8px 12px rgba(200,80,120,0.06);
  }

  .key.big{
    grid-column: span 2;
  }

  /* heart button decoration */
  .heart-btn{
    display:inline-flex;
    gap:8px;
    align-items:center;
    justify-content:center;
  }
  .heart-emoji{
    font-size:16px;
    display:inline-block;
    transform-origin:center;
  }
  .heart-emoji.pulse{
    animation: heartbeat 0.9s ease infinite;
  }
  @keyframes heartbeat{
    0%{ transform: scale(1); }
    25%{ transform: scale(1.22); }
    40%{ transform: scale(0.96); }
    60%{ transform: scale(1.08); }
    100%{ transform: scale(1); }
  }

  /* small footer */
  .foot{
    margin-top:12px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    font-size:12px;
    color:#8a476f;
    opacity:0.9;
  }

  /* responsive tweaks */
  @media (max-width:420px){
    .card{padding:16px}
    .display{min-height:80px}
    button.key{padding:12px;font-size:16px}
  }
</style>
</head>
<body>

<div class="bg-heart" aria-hidden="true">
  <!-- floating hearts (random positions generated by JS) -->
</div>

<div class="card" role="application" aria-label="Love vibes calculator">
  <div class="title">
    <div class="logo">‚ù§</div>
    <div>
      <h1>Love Vibes Calculator</h1>
      <p class="sub">Calculate with sweetness ‚ú®</p>
    </div>
  </div>

  <div class="display" id="display" aria-live="polite">
    <div class="expr" id="expression">0</div>
    <div class="result" id="result">0</div>
  </div>

  <div class="keys" role="group" aria-label="Calculator keys">
    <button class="key clear" data-action="clear">C</button>
    <button class="key" data-value="(">(</button>
    <button class="key" data-value=")">)</button>
    <button class="key op" data-value="/">√∑</button>

    <button class="key" data-value="7">7</button>
    <button class="key" data-value="8">8</button>
    <button class="key" data-value="9">9</button>
    <button class="key op" data-value="*">√ó</button>

    <button class="key" data-value="4">4</button>
    <button class="key" data-value="5">5</button>
    <button class="key" data-value="6">6</button>
    <button class="key op" data-value="-">‚àí</button>

    <button class="key" data-value="1">1</button>
    <button class="key" data-value="2">2</button>
    <button class="key" data-value="3">3</button>
    <button class="key op" data-value="+">+</button>

    <button class="key" data-value="0" class="big">0</button>
    <button class="key" data-value=".">.</button>
    <button class="key big" data-action="equals"> 
      <span class="heart-btn"><span class="heart-emoji pulse">üíñ</span> =</span>
    </button>
  </div>

  <div class="foot">
    <div>Target: 0-‚àû</div>
    <div>Made by ishita <span style="color:var(--accent-dark)">‚ù§</span></div>
  </div>
</div>

<script>
/* ---------- Floating heart background ---------- */
const bg = document.querySelector('.bg-heart');
for(let i=0;i<18;i++){
  const h = document.createElement('i');
  h.textContent = '‚ù§';
  const left = Math.random()*100;
  const size = 12 + Math.random()*28;
  h.style.left = left + 'vw';
  h.style.bottom = (-20 - Math.random()*60) + 'vh';
  h.style.fontSize = size + 'px';
  h.style.animationDuration = (12 + Math.random()*10) + 's';
  h.style.animationDelay = (-Math.random()*12) + 's';
  bg.appendChild(h);
}

/* ---------- Calculator logic ---------- */
const exprEl = document.getElementById('expression');
const resEl  = document.getElementById('result');
const keys = document.querySelectorAll('.key');

let expression = ''; // visible expression string
let lastPressedEquals = false;

function updateDisplay(){
  exprEl.textContent = expression || '0';
  // try to show preview result
  try {
    if(expression.trim()===''){ resEl.textContent = '0'; return; }
    // replace fancy symbols for eval
    const safeExpr = expression.replace(/√ó/g,'*').replace(/√∑/g,'/').replace(/‚àí/g,'-');
    // prevent trailing operator eval errors
    const lastChar = safeExpr.trim().slice(-1);
    if(['+','-','*','/','.','('].includes(lastChar)) {
      // show partial
      resEl.textContent = '...';
      return;
    }
    // Evaluate in safer sandbox: using Function
    const val = Function('"use strict";return (' + safeExpr + ')')();
    if(Number.isFinite(val)) resEl.textContent = val;
    else resEl.textContent = 'Err';
  } catch(e){
    resEl.textContent = 'Err';
  }
}

function appendValue(val){
  if(lastPressedEquals){
    // if user starts typing number after equals, reset
    if(/[0-9.]/.test(val)){
      expression = val;
    } else {
      expression = resEl.textContent + val;
    }
    lastPressedEquals = false;
  } else {
    expression += val;
  }
  updateDisplay();
}

function clearAll(){
  expression = '';
  resEl.textContent = '0';
  exprEl.textContent = '0';
  lastPressedEquals = false;
}

function calculate(){
  try {
    const safeExpr = expression.replace(/√ó/g,'*').replace(/√∑/g,'/').replace(/‚àí/g,'-');
    const lastChar = safeExpr.trim().slice(-1);
    if(['+','-','*','/','.','('].includes(lastChar)) {
      // ignore trailing operator
      expression = safeExpr.slice(0,-1);
    }
    const val = Function('"use strict";return (' + (expression.replace(/√ó/g,'*').replace(/√∑/g,'/')) + ')')();
    if(typeof val === 'number' && Number.isFinite(val)){
      resEl.textContent = val;
      expression = String(val);
      lastPressedEquals = true;
    } else {
      resEl.textContent = 'Err';
    }
  } catch(e){
    resEl.textContent = 'Err';
  }
}

/* ---------- Button events ---------- */
keys.forEach(k=>{
  k.addEventListener('click', ()=>{
    const v = k.dataset.value;
    const action = k.dataset.action;
    if(action === 'clear'){
      clearAll();
      return;
    }
    if(action === 'equals'){
      calculate();
      return;
    }
    if(v){
      appendValue(v);
    }
  });
});

/* ---------- Keyboard support ---------- */
document.addEventListener('keydown', (e)=>{
  const key = e.key;
  if(key === 'Enter' ){ e.preventDefault(); calculate(); return; }
  if(key === 'Escape'){ clearAll(); return; }
  if(key === 'Backspace'){
    expression = expression.slice(0,-1);
    updateDisplay();
    return;
  }
  // accept numbers and operators
  if(/[0-9+\-*/().]/.test(key)){
    // map / * - + to visible operators (we keep internal mapping)
    if(key === '/') appendValue('/');
    else if(key === '*') appendValue('*');
    else if(key === '-') appendValue('-');
    else if(key === '+') appendValue('+');
    else appendValue(key);
  }
});

/* ---------- Accessibility: focus and hover feedback ---------- */
document.addEventListener('keydown', (e)=>{
  // small visual bounce on pressing any numeric/operator key by adding a tiny transform
  const keyButtons = Array.from(keys);
  const ch = e.key;
  let match;
  if(ch === 'Enter') match = keyButtons.find(b=>b.dataset.action === 'equals');
  else if(ch === 'Escape') match = keyButtons.find(b=>b.dataset.action === 'clear');
  else match = keyButtons.find(b=>b.dataset.value === ch);
  if(match){
    match.style.transform = 'translateY(2px) scale(0.995)';
    setTimeout(()=> match.style.transform = '', 120);
  }
});

/* initialize */
updateDisplay();
</script>
</body>
</html>